import{_ as R,r as V,a as k,b as B,c as x,d as n,e as l,w as r,f as N,v as L,g as E,h as s,n as C,E as q,i as F,j as I,k as j,l as A,o as g,m as i,T as G,F as Q,p as U,t as D,q as J,s as K,u as $,x as O,y as W,z as X}from"./index-DwJLLT9I.js";const Z={class:"tw-max-w-[600px] tw-pb-20"},ee={class:"tw-mb-4 tw-flex tw-gap-x-4"},te={key:0,class:"tw-bg-gray-200 tw-py-20 tw-text-center"},oe={key:1,class:"tw-border tw-border-gray-200 tw-py-6"},se={class:"tw-px-6"},ae={class:"tw-flex tw-flex-col tw-gap-y-2"},ne={class:""},le={class:""},re={class:""},ie=["innerHTML"],de={class:"tw-absolute tw-right-0 tw-top-0"},me={class:"tw-text-base md:tw-text-2xl"},ce={class:"tw-text-2xl"},ue={__name:"Calculator",setup(pe){const T=V({dateTimeRange:["",""]}),y=k(!1),p=k([]),S=B(()=>p.value.reduce((o,e)=>e.price?o+e.price:o,0)),z=(o,e)=>{const d=s(e).diff(s(o),"minute"),c=Math.floor(d/60),u=d%60;let a=c*20;return u>0&&(a+=u<=30?10:20),{hours:c,minutes:u,price:Math.min(a,200),originPrice:a}},H=o=>`${Number(o).toFixed(0).replace(/./g,(d,c,u)=>c&&d!=="."&&(u.length-c)%3===0?`, ${d}`.replace(/\s/g,""):d)}`,h=(o=1e3)=>new Promise(e=>{setTimeout(e,o)}),P=async()=>{y.value=!0,p.value=[];const[o,e]=T.dateTimeRange;if(!o||!e){y.value=!1;return}const d=s(o).format("YYYY-MM-DD"),c=s(e).format("YYYY-MM-DD"),u=s(c).diff(s(d),"day");for(let a=0;a<=u;a++){const _=a===0?s(o).add(a,"day").format("YYYY-MM-DD HH:mm"):s(o).add(a,"day").format("YYYY-MM-DD 00:00"),f=s(_).add(1,"day").format("YYYY-MM-DD 00:00"),M=s(f).isAfter(e)?s(e).format("YYYY-MM-DD HH:mm"):s(f).format("YYYY-MM-DD HH:mm"),{hours:m,minutes:Y,price:v,originPrice:t}=z(_,M);if(m===0&&Y===0)continue;let w=`${m} * 20 = ${m*20} 元`;Y>0&&(Y<=30?w=`${m} * 20 + 1 * 10 (未滿半小時，以半小時計) = ${m*20+1*10} 元`:w=`${m} * 20 + 1 * 20 (超過半小時，且未滿1小時，以1小時計) = ${m*20+1*20} 元`),t>200&&(w+="<br>超過每日上限 200 元，以 200 元計算"),await h(600),p.value.push({type:"primary",size:"large",timestamp:s(_).format("YYYY-MM-DD HH:mm"),dateRange:`${_} ～ ${M}`,price:v,hours:m,minutes:Y,priceCalcProcess:w}),await C(),b()}await h(600),p.value.push({type:"primary",size:"large",timestamp:s(e).format("YYYY-MM-DD HH:mm")}),await C(),b(),y.value=!1},b=()=>{document.querySelector(".el-main").scrollTo({top:document.querySelector(".el-main").scrollHeight,behavior:"smooth"})};return(o,e)=>{const d=q,c=J("Search"),u=K,a=F,_=I,f=O,M=W,m=X,Y=j,v=A;return g(),x("div",Z,[n("div",ee,[l(d,{modelValue:T.dateTimeRange,"onUpdate:modelValue":e[0]||(e[0]=t=>T.dateTimeRange=t),type:"datetimerange","start-placeholder":"起始日期","end-placeholder":"結束日期",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm:00","unlink-panels":""},null,8,["modelValue"]),l(a,{type:"primary",onClick:P},{default:r(()=>[l(u,{size:16},{default:r(()=>[l(c)]),_:1}),e[1]||(e[1]=n("span",{class:"tw-text-base"},"查詢",-1))]),_:1})]),p.value.length<=0&&!y.value?(g(),x("div",te,[l(_,{type:"danger",class:"!tw-text-lg"},{default:r(()=>e[2]||(e[2]=[i(" 請先選擇起迄時間 ")])),_:1})])):p.value.length>0?(g(),x("div",oe,[n("div",se,[l(Y,null,{default:r(()=>[l(G,{name:"fade"},{default:r(()=>[(g(!0),x(Q,null,U(p.value,(t,w)=>(g(),$(m,{key:w,placement:"top",icon:t.icon,type:t.type,color:t.color,size:t.size,hollow:t.hollow,timestamp:t.timestamp},{default:r(()=>[t.dateRange?(g(),$(M,{key:0},{default:r(()=>[n("div",ae,[n("p",ne,D(t.dateRange),1),n("p",le,[e[3]||(e[3]=i(" 共 ")),l(f,{type:"primary"},{default:r(()=>[i(D(t.hours),1)]),_:2},1024),e[4]||(e[4]=i(" 小時 ")),l(f,{type:"primary"},{default:r(()=>[i(D(t.minutes),1)]),_:2},1024),e[5]||(e[5]=i(" 分 "))]),n("p",re,[e[6]||(e[6]=i(" 金額為:")),e[7]||(e[7]=n("br",null,null,-1)),n("span",{class:"tw-block tw-pl-4",innerHTML:t.priceCalcProcess},null,8,ie)]),n("p",de,[e[8]||(e[8]=i(" 小計 $ ")),l(f,{type:"danger"},{default:r(()=>[i(D(H(t.price)),1)]),_:2},1024),e[9]||(e[9]=i(" 元 "))])])]),_:2},1024)):E("",!0)]),_:2},1032,["icon","type","color","size","hollow","timestamp"]))),128))]),_:1})]),_:1})]),N(l(v,null,{default:r(()=>[n("p",me,[e[10]||(e[10]=i(" 總計 $ ")),l(_,{type:"danger"},{default:r(()=>[n("span",ce,D(H(S.value)),1)]),_:1}),e[11]||(e[11]=i(" 元 "))])]),_:1},512),[[L,!y.value]])])):E("",!0)])}}},fe=R(ue,[["__scopeId","data-v-77dadd82"]]);export{fe as default};
